"use strict";

function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }
function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }
function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }
// Slider
var prizesLeftArrow = document.querySelector('.controls-left'),
  prizesRightArrow = document.querySelector('.controls-right');

// left and right image slider
var sliderInfo = document.querySelector('.tasks__info');

//counter slide on media 890
var allSlides = document.querySelector('.all-slide');
var counterSlide = document.querySelector('.active-slide');
var count = 1;

//buttons slider

var buttonLeft = document.querySelector('.controls-slider-left');
var buttonRight = document.querySelector('.controls-slider-right');
buttonLeft.onmouseover = function () {
  var but = document.querySelector('.controls-left');
  but.classList.add('onmouse');
};
buttonLeft.onmouseout = function () {
  var but = document.querySelector('.controls-left');
  but.classList.remove('onmouse');
};
buttonRight.onmouseover = function () {
  var but = document.querySelector('.controls-right');
  but.classList.add('onmouse');
};
buttonRight.onmouseout = function () {
  var but = document.querySelector('.controls-right');
  but.classList.remove('onmouse');
};
var slider1 = slider('tasks-slider', '.tasks__slider-item', prizesLeftArrow, prizesRightArrow, false);
function slider(id, itemSelector, leftArrow, rightArrow, autoplay, config) {
  var AUTOPLAY_INTERVAL = 50000;
  var el = document.getElementById(id);
  el.classList.add('slider');
  var mediaStep = '';
  var activeIndIndex = 0;
  var toogleIndex = 0;
  var items = el.querySelectorAll(itemSelector);
  var timerId;
  function allSlide() {
    allSlides.innerHTML = items.length;
  }
  allSlide();
  function getMediaStep() {
    var width = window.innerWidth;
    var newStep = width > (obj.config.media && obj.config.media.lg) ? 'lg' : width > (obj.config.media && obj.config.media.md) ? 'md' : width > (obj.config.media && obj.config.media.sm) ? 'sm' : 'xs';
    if (mediaStep !== newStep) {
      mediaStep = newStep;
      obj.buildSlider();
    }
  }
  function getItemsQuantity() {
    return obj.config.elemsPerPage[mediaStep];
  }
  function onResize() {
    getMediaStep();
  }
  var obj = {
    activeIndex: 0,
    activeIndIndex: activeIndIndex > 0 ? activeIndIndex : 0,
    toggleIndex: 0,
    init: function init() {
      getMediaStep();
      var startX = 0;
      var touched = false;
      var inner = el.querySelector('.slider-inner');
      var indicators = el.querySelectorAll('.slider-indicator');
      function onMouseDown(e) {
        startX = e.clientX || e.touches[0].clientX;
        touched = true;
        var weekly = document.querySelectorAll('.result__weeks-btn');
        // for (const item of weekly) item.addEventListener('touchstart', selectWeek);
      }

      function onMouseMove(e) {
        e.preventDefault();
        if (touched) {
          inner = inner || el.querySelector('.slider-inner');
          var x = e.clientX || e.touches[0].clientX;
          var diff = x - startX;
          if (diff < 0 && activeIndIndex < indicators.length - 1 || diff > 0 && activeIndIndex > 0) {
            inner.style.transform = 'translateX(' + diff + 'px)';
          }
        }
      }
      function onMouseEnd(e) {
        if (touched) {
          var x = e.clientX || e.changedTouches[0].clientX;
          if (x - startX > 30) {
            toggleIndex(activeIndIndex - 1);
            count--;
            counterSlide.innerHTML = count;
            sliderInfo.classList.remove('rightImageHidden');
          } else if (startX - x > 30) {
            toggleIndex(activeIndIndex + 1);
            count++;
            counterSlide.innerHTML = count;
            sliderInfo.classList.remove('leftImageHidden');
          }
          inner = inner || el.querySelector('.slider-inner');
          inner.style.transform = '';
        }
        touched = false;
        if (activeIndIndex === 0) {
          count = 1;
          counterSlide.innerHTML = count;
          sliderInfo.classList.add('leftImageHidden');
        }
        if (activeIndIndex === items.length - 1) {
          count = items.length;
          counterSlide.innerHTML = count;
          sliderInfo.classList.add('rightImageHidden');
        }
      }
      rightArrow.addEventListener('click', function () {
        toggleIndex(activeIndIndex + 1);
        obj.next();
        count++;
        counterSlide.innerHTML = count;
        if (activeIndIndex >= 0) {
          sliderInfo.classList.remove('leftImageHidden');
        } else {
          sliderInfo.classList.add('leftImageHidden');
        }
        if (activeIndIndex === items.length - 1) {
          sliderInfo.classList.add('rightImageHidden');
        } else {
          sliderInfo.classList.remove('rightImageHidden');
        }
      });
      leftArrow.addEventListener('click', function () {
        toggleIndex(activeIndIndex - 1);
        obj.prev();
        count--;
        counterSlide.innerHTML = count;
        if (activeIndIndex === items.length - 1) {
          sliderInfo.classList.add('rightImageHidden');
        } else {
          sliderInfo.classList.remove('rightImageHidden');
        }
        if (activeIndIndex <= 0) {
          sliderInfo.classList.add('leftImageHidden');
        }
      });
      window.removeEventListener('resize', onResize);
      window.addEventListener('resize', onResize);
      el.removeEventListener('mousedown', onMouseDown);
      el.removeEventListener('touchstart', onMouseDown);
      el.addEventListener('mousedown', onMouseDown);
      el.addEventListener('touchstart', onMouseDown);
      el.removeEventListener('mousemove', onMouseMove);
      el.removeEventListener('touchmove', onMouseMove);
      el.addEventListener('mousemove', onMouseMove);
      // el.addEventListener('touchmove', onMouseMove);
      window.removeEventListener('mouseup', onMouseEnd);
      window.removeEventListener('touchend', onMouseEnd);
      window.addEventListener('mouseup', onMouseEnd);
      window.addEventListener('touchend', onMouseEnd);
      if (autoplay) {
        timerId = setInterval(function () {
          return toggleIndex((activeIndIndex + 1) % indicators.length);
        }, AUTOPLAY_INTERVAL);
      }
      return obj;
    },
    config: {
      elemsPerPage: _objectSpread(_objectSpread({}, {
        'lg': 1,
        'md': 1,
        'sm': 1,
        'xs': 1
      }), config && config.elemsPerPage || {}),
      media: _objectSpread(_objectSpread({}, {
        'lg': 1160,
        'md': 920,
        'sm': 700
      }), config && config.media || {})
    },
    buildSlider: function buildSlider() {
      obj.removeSlider();
      var wrapper = document.createElement("div");
      wrapper.className = 'slider-wrapper';
      var inner = document.createElement("div");
      inner.className = 'slider-inner';
      wrapper.appendChild(inner);
      el.appendChild(wrapper);
      if (obj.config.elemsPerPage[mediaStep] >= items.length + 1) {
        el.classList.add('not-enough-elems');
        return;
      }
      buildPages();
    },
    //     getMediaStep() {
    //     // var width = window.innerWidth;
    //     // var newStep = width > mediaConfig && mediaConfig.lg !== undefined ? mediaConfig.lg : 1150 ? 'lg'
    //     //     : width > (mediaConfig && mediaConfig.md !== undefined ? mediaConfig.md : 767) ? 'md'
    //     //         : width > (mediaConfig && mediaConfig.sm !== undefined ? mediaConfig.sm : 600) ? 'sm' : 'xs';
    //
    //     if (mediaStep !== newStep) {
    //         mediaStep = newStep;
    //         obj.buildSlider();
    //     }
    // },
    removeSlider: function removeSlider() {
      var wrapper = el.querySelector('.slider-wrapper');
      el.classList.remove('not-enough-elems');
      wrapper && wrapper.remove();
      if (timerId) {
        clearInterval(timerId);
      }
    },
    toggle: toggleIndex
  };
  function buildIndicators() {
    var prevInd = el.querySelector('.slider-indicators');
    prevInd && prevInd.remove();
    var indicators = document.createElement('div');
    indicators.classList.add('slider-indicators');
    var _loop = function _loop(i) {
      var indicator = document.createElement('div');
      indicator.classList.add('slider-indicator');
      if (i === activeIndIndex) {
        indicator.classList.add('active');
      }
      indicator.setAttribute('index', i);
      indicator.addEventListener('click', function () {
        toggleIndex(i);
      });
      indicators.appendChild(indicator);
    };
    for (var i = 0; i < Math.ceil(items.length / getItemsQuantity()); i++) {
      _loop(i);
    }
    var wrapper = el.querySelector('.slider-wrapper');
    wrapper.appendChild(indicators);
  }
  function buildPages(step) {
    step = step || 1;
    var pagePrev = buildPage(obj.activeIndex + items.length - getItemsQuantity() * step);
    var pageCurrent = buildPage(obj.activeIndex);
    var pageNext = buildPage(obj.activeIndex + getItemsQuantity() * step);
    var inner = el.querySelector('.slider-inner');
    if (getItemsQuantity() < items.length) {
      buildIndicators();
      if (!el.querySelector('.slider-indicator.active')) {
        // toggleIndex(0);
      }
    }
    inner.innerHTML = '';
    inner.appendChild(pagePrev);
    inner.appendChild(pageCurrent);
    inner.appendChild(pageNext);
  }
  function buildPage(index) {
    var page = document.createElement("div");
    page.classList.add('slider-page');
    for (var i = index; i < index + getItemsQuantity(); i++) {
      var item = items[i % items.length];
      var newItem = item.cloneNode(true);
      page.appendChild(newItem);
    }
    return page;
  }
  function toggleIndex(index) {
    var indActive = el.querySelector('.slider-indicator.active');
    var indicators = el.querySelectorAll('.slider-indicator');
    if (!indicators[index]) {
      return;
    }
    leftArrow.classList.remove('arrow-disabled');
    rightArrow.classList.remove('arrow-disabled');
    if (index === 0) {
      leftArrow.classList.add('arrow-disabled');
    }
    if (index === indicators.length - 1) {
      rightArrow.classList.add('arrow-disabled');
    }
    indActive && indActive.classList.remove('active');
    indicators[index] && indicators[index].classList.add('active');
    if (index > activeIndIndex) {
      index - activeIndIndex > 1 && buildPages(index - activeIndIndex);
      obj.next();
    } else if (index < activeIndIndex) {
      activeIndIndex - index > 1 && buildPages(activeIndIndex - index);
      obj.prev();
    }
    activeIndIndex = index;
    // document.querySelector('.current').textContent = activeIndIndex + 1;
  }

  obj.prev = function () {
    var wrapper = el.querySelector('.slider-wrapper');
    wrapper.classList.add('prev');
    setTimeout(function () {
      wrapper.classList.remove('prev');
      obj.activeIndex = (obj.activeIndex - getItemsQuantity() + items.length) % items.length;
      buildPages();
    }, 300);
  };
  obj.next = function () {
    var wrapper = el.querySelector('.slider-wrapper');
    wrapper.classList.add('next');
    setTimeout(function () {
      wrapper.classList.remove('next');
      obj.activeIndex = (obj.activeIndex + getItemsQuantity() + items.length) % items.length;
      buildPages();
    }, 300);
  };
  return obj.init();
}
"use strict";
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiLCJzZWNvbmQuanMiXSwibmFtZXMiOlsicHJpemVzTGVmdEFycm93IiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwicHJpemVzUmlnaHRBcnJvdyIsInNsaWRlckluZm8iLCJhbGxTbGlkZXMiLCJjb3VudGVyU2xpZGUiLCJjb3VudCIsImJ1dHRvbkxlZnQiLCJidXR0b25SaWdodCIsIm9ubW91c2VvdmVyIiwiYnV0IiwiY2xhc3NMaXN0IiwiYWRkIiwib25tb3VzZW91dCIsInJlbW92ZSIsInNsaWRlcjEiLCJzbGlkZXIiLCJpZCIsIml0ZW1TZWxlY3RvciIsImxlZnRBcnJvdyIsInJpZ2h0QXJyb3ciLCJhdXRvcGxheSIsImNvbmZpZyIsIkFVVE9QTEFZX0lOVEVSVkFMIiwiZWwiLCJnZXRFbGVtZW50QnlJZCIsIm1lZGlhU3RlcCIsImFjdGl2ZUluZEluZGV4IiwidG9vZ2xlSW5kZXgiLCJpdGVtcyIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJ0aW1lcklkIiwiYWxsU2xpZGUiLCJpbm5lckhUTUwiLCJsZW5ndGgiLCJnZXRNZWRpYVN0ZXAiLCJ3aWR0aCIsIndpbmRvdyIsImlubmVyV2lkdGgiLCJuZXdTdGVwIiwib2JqIiwibWVkaWEiLCJsZyIsIm1kIiwic20iLCJidWlsZFNsaWRlciIsImdldEl0ZW1zUXVhbnRpdHkiLCJlbGVtc1BlclBhZ2UiLCJvblJlc2l6ZSIsImFjdGl2ZUluZGV4IiwidG9nZ2xlSW5kZXgiLCJpbml0Iiwic3RhcnRYIiwidG91Y2hlZCIsImlubmVyIiwiaW5kaWNhdG9ycyIsIm9uTW91c2VEb3duIiwiZSIsImNsaWVudFgiLCJ0b3VjaGVzIiwid2Vla2x5Iiwib25Nb3VzZU1vdmUiLCJwcmV2ZW50RGVmYXVsdCIsIngiLCJkaWZmIiwic3R5bGUiLCJ0cmFuc2Zvcm0iLCJvbk1vdXNlRW5kIiwiY2hhbmdlZFRvdWNoZXMiLCJhZGRFdmVudExpc3RlbmVyIiwibmV4dCIsInByZXYiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwic2V0SW50ZXJ2YWwiLCJyZW1vdmVTbGlkZXIiLCJ3cmFwcGVyIiwiY3JlYXRlRWxlbWVudCIsImNsYXNzTmFtZSIsImFwcGVuZENoaWxkIiwiYnVpbGRQYWdlcyIsImNsZWFySW50ZXJ2YWwiLCJ0b2dnbGUiLCJidWlsZEluZGljYXRvcnMiLCJwcmV2SW5kIiwiaSIsImluZGljYXRvciIsInNldEF0dHJpYnV0ZSIsIk1hdGgiLCJjZWlsIiwic3RlcCIsInBhZ2VQcmV2IiwiYnVpbGRQYWdlIiwicGFnZUN1cnJlbnQiLCJwYWdlTmV4dCIsImluZGV4IiwicGFnZSIsIml0ZW0iLCJuZXdJdGVtIiwiY2xvbmVOb2RlIiwiaW5kQWN0aXZlIiwic2V0VGltZW91dCJdLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBQTtBQUNBLElBQUlBLGVBQWUsR0FBR0MsUUFBUSxDQUFDQyxhQUFhLENBQUMsZ0JBQWdCLENBQUM7RUFDMURDLGdCQUFnQixHQUFHRixRQUFRLENBQUNDLGFBQWEsQ0FBQyxpQkFBaUIsQ0FBQzs7QUFFaEU7QUFDQSxJQUFNRSxVQUFVLEdBQUdILFFBQVEsQ0FBQ0MsYUFBYSxDQUFDLGNBQWMsQ0FBQzs7QUFHekQ7QUFDQSxJQUFNRyxTQUFTLEdBQUdKLFFBQVEsQ0FBQ0MsYUFBYSxDQUFDLFlBQVksQ0FBQztBQUN0RCxJQUFNSSxZQUFZLEdBQUdMLFFBQVEsQ0FBQ0MsYUFBYSxDQUFDLGVBQWUsQ0FBQztBQUM1RCxJQUFJSyxLQUFLLEdBQUcsQ0FBQzs7QUFFYjs7QUFFQSxJQUFNQyxVQUFVLEdBQUdQLFFBQVEsQ0FBQ0MsYUFBYSxDQUFDLHVCQUF1QixDQUFDO0FBQ2xFLElBQU1PLFdBQVcsR0FBR1IsUUFBUSxDQUFDQyxhQUFhLENBQUMsd0JBQXdCLENBQUM7QUFFcEVNLFVBQVUsQ0FBQ0UsV0FBVyxHQUFHLFlBQVk7RUFDakMsSUFBSUMsR0FBRyxHQUFHVixRQUFRLENBQUNDLGFBQWEsQ0FBQyxnQkFBZ0IsQ0FBQztFQUNsRFMsR0FBRyxDQUFDQyxTQUFTLENBQUNDLEdBQUcsQ0FBQyxT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QUFHLENBQUNULEdBQUcsQ0FBQ1MsV0FBVyxHQUFHSCxnQkFBZ0IsRUFBRSxHQUFHakIsS0FBSyxDQUFDSyxNQUFNLElBQUlMLEtBQUssQ0FBQ0ssTUFBTTtNQUN0RjZDLFVBQVUsRUFBRTtJQUNoQixDQUFDLEVBQUUsR0FBRyxDQUFDO0VBQ1gsQ0FBQztFQUVEdkMsR0FBRyxDQUFDOEIsSUFBSSxHQUFHLFlBQVk7SUFDbkIsSUFBSUssT0FBTyxHQUFHbkQsRUFBRSxDQUFDdkIsYUFBYSxDQUFDLGlCQUFpQixDQUFDO0lBQ2pEMEUsT0FBTyxDQUFDaEUsU0FBUyxDQUFDQyxHQUFHLENBQUMsTUFBTSxDQUFDO0lBQzdCd0YsVUFBVSxDQUFDLFlBQVk7TUFDbkJ6QixPQUFPLENBQUNoRSxTQUFTLENBQUNHLE1BQU0sQ0FBQyxNQUFNLENBQUM7TUFDaEMwQixHQUFHLENBQUNTLFdBQVcsR0FBRyxDQUFDVCxHQUFHLENBQUNTLFdBQVcsR0FBR0gsZ0JBQWdCLEVBQUUsR0FBR2pCLEtBQUssQ0FBQ0ssTUFBTSxJQUFJTCxLQUFLLENBQUNLLE1BQU07TUFDdEY2QyxVQUFVLEVBQUU7SUFDaEIsQ0FBQyxFQUFFLEdBQUcsQ0FBQztFQUNYLENBQUM7RUFDRCxPQUFPdkMsR0FBRyxDQUFDVyxJQUFJLEVBQUU7QUFDckI7QUMzV0EiLCJmaWxlIjoibWFpbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8vIFNsaWRlclxubGV0IHByaXplc0xlZnRBcnJvdyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jb250cm9scy1sZWZ0JyksXG4gICAgcHJpemVzUmlnaHRBcnJvdyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jb250cm9scy1yaWdodCcpO1xuXG4vLyBsZWZ0IGFuZCByaWdodCBpbWFnZSBzbGlkZXJcbmNvbnN0IHNsaWRlckluZm8gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcudGFza3NfX2luZm8nKTtcblxuXG4vL2NvdW50ZXIgc2xpZGUgb24gbWVkaWEgODkwXG5jb25zdCBhbGxTbGlkZXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYWxsLXNsaWRlJylcbmNvbnN0IGNvdW50ZXJTbGlkZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5hY3RpdmUtc2xpZGUnKVxubGV0IGNvdW50ID0gMTtcblxuLy9idXR0b25zIHNsaWRlclxuXG5jb25zdCBidXR0b25MZWZ0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmNvbnRyb2xzLXNsaWRlci1sZWZ0Jyk7XG5jb25zdCBidXR0b25SaWdodCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jb250cm9scy1zbGlkZXItcmlnaHQnKTtcblxuYnV0dG9uTGVmdC5vbm1vdXNlb3ZlciA9IGZ1bmN0aW9uICgpIHtcbiAgICBsZXQgYnV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmNvbnRyb2xzLWxlZnQnKTtcbiAgICBidXQuY2xhc3NMaXN0LmFkZCgnb25tb3VzZScpXG59O1xuYnV0dG9uTGVmdC5vbm1vdXNlb3V0ID0gZnVuY3Rpb24gKCkge1xuICAgIGxldCBidXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY29udHJvbHMtbGVmdCcpO1xuICAgIGJ1dC5jbGFzc0xpc3QucmVtb3ZlKCdvbm1vdXNlJylcbn07XG5cbmJ1dHRvblJpZ2h0Lm9ubW91c2VvdmVyID0gZnVuY3Rpb24gKCkge1xuICAgIGxldCBidXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY29udHJvbHMtcmlnaHQnKTtcbiAgICBidXQuY2xhc3NMaXN0LmFkZCgnb25tb3VzZScpXG59O1xuYnV0dG9uUmlnaHQub25tb3VzZW91dCA9IGZ1bmN0aW9uICgpIHtcbiAgICBsZXQgYnV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmNvbnRyb2xzLXJpZ2h0Jyk7XG4gICAgYnV0LmNsYXNzTGlzdC5yZW1vdmUoJ29ubW91c2UnKVxufTtcblxudmFyIHNsaWRlcjEgPSBzbGlkZXIoXG4gICAgJ3Rhc2tzLXNsaWRlcicsXG4gICAgJy50YXNrc19fc2xpZGVyLWl0ZW0nLFxuICAgIHByaXplc0xlZnRBcnJvdywgcHJpemVzUmlnaHRBcnJvdywgZmFsc2UpO1xuXG5mdW5jdGlvbiBzbGlkZXIoaWQsIGl0ZW1TZWxlY3RvciwgbGVmdEFycm93LCByaWdodEFycm93LCBhdXRvcGxheSwgY29uZmlnKSB7XG4gICAgY29uc3QgQVVUT1BMQVlfSU5URVJWQUwgPSA1MDAwMDtcblxuXG4gICAgdmFyIGVsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoaWQpO1xuICAgIGVsLmNsYXNzTGlzdC5hZGQoJ3NsaWRlcicpXG4gICAgdmFyIG1lZGlhU3RlcCA9ICcnO1xuICAgIHZhciBhY3RpdmVJbmRJbmRleCA9IDA7XG4gICAgdmFyIHRvb2dsZUluZGV4ID0gMDtcbiAgICB2YXIgaXRlbXMgPSBlbC5xdWVyeVNlbGVjdG9yQWxsKGl0ZW1TZWxlY3Rvcik7XG4gICAgdmFyIHRpbWVySWQ7XG5cbiAgICBmdW5jdGlvbiBhbGxTbGlkZSgpIHtcbiAgICAgICAgYWxsU2xpZGVzLmlubmVySFRNTCA9IGl0ZW1zLmxlbmd0aDtcbiAgICB9XG5cbiAgICBhbGxTbGlkZSgpXG5cbiAgICBmdW5jdGlvbiBnZXRNZWRpYVN0ZXAoKSB7XG4gICAgICAgIHZhciB3aWR0aCA9IHdpbmRvdy5pbm5lcldpZHRoO1xuICAgICAgICB2YXIgbmV3U3RlcCA9IHdpZHRoID4gKG9iai5jb25maWcubWVkaWEgJiYgb2JqLmNvbmZpZy5tZWRpYS5sZykgPyAnbGcnXG4gICAgICAgICAgICA6IHdpZHRoID4gKG9iai5jb25maWcubWVkaWEgJiYgb2JqLmNvbmZpZy5tZWRpYS5tZCkgPyAnbWQnXG4gICAgICAgICAgICAgICAgOiB3aWR0aCA+IChvYmouY29uZmlnLm1lZGlhICYmIG9iai5jb25maWcubWVkaWEuc20pID8gJ3NtJyA6ICd4cyc7XG5cbiAgICAgICAgaWYgKG1lZGlhU3RlcCAhPT0gbmV3U3RlcCkge1xuICAgICAgICAgICAgbWVkaWFTdGVwID0gbmV3U3RlcDtcbiAgICAgICAgICAgIG9iai5idWlsZFNsaWRlcigpO1xuICAgICAgICB9XG4gICAgfVxuXG5cbiAgICBmdW5jdGlvbiBnZXRJdGVtc1F1YW50aXR5KCkge1xuICAgICAgICByZXR1cm4gb2JqLmNvbmZpZy5lbGVtc1BlclBhZ2VbbWVkaWFTdGVwXVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIG9uUmVzaXplKCkge1xuICAgICAgICBnZXRNZWRpYVN0ZXAoKVxuICAgIH1cblxuICAgIHZhciBvYmogPSB7XG4gICAgICAgIGFjdGl2ZUluZGV4OiAwLFxuICAgICAgICBhY3RpdmVJbmRJbmRleDogYWN0aXZlSW5kSW5kZXggPiAwID8gYWN0aXZlSW5kSW5kZXggOiAwLFxuICAgICAgICB0b2dnbGVJbmRleDogMCxcbiAgICAgICAgaW5pdDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgZ2V0TWVkaWFTdGVwKCk7XG5cbiAgICAgICAgICAgIHZhciBzdGFydFggPSAwXG4gICAgICAgICAgICB2YXIgdG91Y2hlZCA9IGZhbHNlXG5cbiAgICAgICAgICAgIHZhciBpbm5lciA9IGVsLnF1ZXJ5U2VsZWN0b3IoJy5zbGlkZXItaW5uZXInKTtcbiAgICAgICAgICAgIHZhciBpbmRpY2F0b3JzID0gZWwucXVlcnlTZWxlY3RvckFsbCgnLnNsaWRlci1pbmRpY2F0b3InKTtcblxuICAgICAgICAgICAgZnVuY3Rpb24gb25Nb3VzZURvd24oZSkge1xuICAgICAgICAgICAgICAgIHN0YXJ0WCA9IGUuY2xpZW50WCB8fCBlLnRvdWNoZXNbMF0uY2xpZW50WDtcbiAgICAgICAgICAgICAgICB0b3VjaGVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICBjb25zdCB3ZWVrbHkgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcucmVzdWx0X193ZWVrcy1idG4nKTtcbiAgICAgICAgICAgICAgICAvLyBmb3IgKGNvbnN0IGl0ZW0gb2Ygd2Vla2x5KSBpdGVtLmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNoc3RhcnQnLCBzZWxlY3RXZWVrKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZnVuY3Rpb24gb25Nb3VzZU1vdmUoZSkge1xuICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKVxuICAgICAgICAgICAgICAgIGlmICh0b3VjaGVkKSB7XG4gICAgICAgICAgICAgICAgICAgIGlubmVyID0gaW5uZXIgfHwgZWwucXVlcnlTZWxlY3RvcignLnNsaWRlci1pbm5lcicpXG4gICAgICAgICAgICAgICAgICAgIHZhciB4ID0gZS5jbGllbnRYIHx8IGUudG91Y2hlc1swXS5jbGllbnRYO1xuICAgICAgICAgICAgICAgICAgICB2YXIgZGlmZiA9IHggLSBzdGFydFg7XG4gICAgICAgICAgICAgICAgICAgIGlmICgoZGlmZiA8IDAgJiYgYWN0aXZlSW5kSW5kZXggPCBpbmRpY2F0b3JzLmxlbmd0aCAtIDEpIHx8IChkaWZmID4gMCAmJiBhY3RpdmVJbmRJbmRleCA+IDApKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpbm5lci5zdHlsZS50cmFuc2Zvcm0gPSAndHJhbnNsYXRlWCgnICsgZGlmZiArICdweCknXG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZnVuY3Rpb24gb25Nb3VzZUVuZChlKSB7XG4gICAgICAgICAgICAgICAgaWYgKHRvdWNoZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHggPSBlLmNsaWVudFggfHwgZS5jaGFuZ2VkVG91Y2hlc1swXS5jbGllbnRYO1xuXG4gICAgICAgICAgICAgICAgICAgIGlmICh4IC0gc3RhcnRYID4gMzApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRvZ2dsZUluZGV4KGFjdGl2ZUluZEluZGV4IC0gMSlcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvdW50LS1cbiAgICAgICAgICAgICAgICAgICAgICAgIGNvdW50ZXJTbGlkZS5pbm5lckhUTUwgPSBjb3VudDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNsaWRlckluZm8uY2xhc3NMaXN0LnJlbW92ZSgncmlnaHRJbWFnZUhpZGRlbicpXG5cbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChzdGFydFggLSB4ID4gMzApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRvZ2dsZUluZGV4KGFjdGl2ZUluZEluZGV4ICsgMSlcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvdW50KytcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvdW50ZXJTbGlkZS5pbm5lckhUTUwgPSBjb3VudDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNsaWRlckluZm8uY2xhc3NMaXN0LnJlbW92ZSgnbGVmdEltYWdlSGlkZGVuJylcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIGlubmVyID0gaW5uZXIgfHwgZWwucXVlcnlTZWxlY3RvcignLnNsaWRlci1pbm5lcicpXG4gICAgICAgICAgICAgICAgICAgIGlubmVyLnN0eWxlLnRyYW5zZm9ybSA9ICcnXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRvdWNoZWQgPSBmYWxzZVxuICAgICAgICAgICAgICAgIGlmIChhY3RpdmVJbmRJbmRleCA9PT0gMCkge1xuICAgICAgICAgICAgICAgICAgICBjb3VudCA9IDFcbiAgICAgICAgICAgICAgICAgICAgY291bnRlclNsaWRlLmlubmVySFRNTCA9IGNvdW50O1xuICAgICAgICAgICAgICAgICAgICBzbGlkZXJJbmZvLmNsYXNzTGlzdC5hZGQoJ2xlZnRJbWFnZUhpZGRlbicpXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChhY3RpdmVJbmRJbmRleCA9PT0gaXRlbXMubGVuZ3RoIC0gMSkge1xuICAgICAgICAgICAgICAgICAgICBjb3VudCA9IGl0ZW1zLmxlbmd0aDtcbiAgICAgICAgICAgICAgICAgICAgY291bnRlclNsaWRlLmlubmVySFRNTCA9IGNvdW50O1xuICAgICAgICAgICAgICAgICAgICBzbGlkZXJJbmZvLmNsYXNzTGlzdC5hZGQoJ3JpZ2h0SW1hZ2VIaWRkZW4nKVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmlnaHRBcnJvdy5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgICAgICAgICAgICB0b2dnbGVJbmRleChhY3RpdmVJbmRJbmRleCArIDEpXG4gICAgICAgICAgICAgICAgb2JqLm5leHQoKVxuICAgICAgICAgICAgICAgIGNvdW50KytcbiAgICAgICAgICAgICAgICBjb3VudGVyU2xpZGUuaW5uZXJIVE1MID0gY291bnQ7XG4gICAgICAgICAgICAgICAgaWYgKGFjdGl2ZUluZEluZGV4ID49IDApIHtcbiAgICAgICAgICAgICAgICAgICAgc2xpZGVySW5mby5jbGFzc0xpc3QucmVtb3ZlKCdsZWZ0SW1hZ2VIaWRkZW4nKVxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHNsaWRlckluZm8uY2xhc3NMaXN0LmFkZCgnbGVmdEltYWdlSGlkZGVuJylcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBpZiAoYWN0aXZlSW5kSW5kZXggPT09IGl0ZW1zLmxlbmd0aCAtIDEpIHtcbiAgICAgICAgICAgICAgICAgICAgc2xpZGVySW5mby5jbGFzc0xpc3QuYWRkKCdyaWdodEltYWdlSGlkZGVuJylcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBzbGlkZXJJbmZvLmNsYXNzTGlzdC5yZW1vdmUoJ3JpZ2h0SW1hZ2VIaWRkZW4nKVxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgfSlcblxuICAgICAgICAgICAgbGVmdEFycm93LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgICAgICAgICAgIHRvZ2dsZUluZGV4KGFjdGl2ZUluZEluZGV4IC0gMSlcbiAgICAgICAgICAgICAgICBvYmoucHJldigpXG4gICAgICAgICAgICAgICAgY291bnQtLVxuICAgICAgICAgICAgICAgIGNvdW50ZXJTbGlkZS5pbm5lckhUTUwgPSBjb3VudDtcbiAgICAgICAgICAgICAgICBpZiAoYWN0aXZlSW5kSW5kZXggPT09IGl0ZW1zLmxlbmd0aCAtIDEpIHtcbiAgICAgICAgICAgICAgICAgICAgc2xpZGVySW5mby5jbGFzc0xpc3QuYWRkKCdyaWdodEltYWdlSGlkZGVuJylcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBzbGlkZXJJbmZvLmNsYXNzTGlzdC5yZW1vdmUoJ3JpZ2h0SW1hZ2VIaWRkZW4nKVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoYWN0aXZlSW5kSW5kZXggPD0gMCkge1xuICAgICAgICAgICAgICAgICAgICBzbGlkZXJJbmZvLmNsYXNzTGlzdC5hZGQoJ2xlZnRJbWFnZUhpZGRlbicpXG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB9KVxuXG4gICAgICAgICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcigncmVzaXplJywgb25SZXNpemUpO1xuICAgICAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Jlc2l6ZScsIG9uUmVzaXplKTtcbiAgICAgICAgICAgIGVsLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21vdXNlZG93bicsIG9uTW91c2VEb3duKTtcbiAgICAgICAgICAgIGVsLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3RvdWNoc3RhcnQnLCBvbk1vdXNlRG93bik7XG4gICAgICAgICAgICBlbC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLCBvbk1vdXNlRG93bik7XG4gICAgICAgICAgICBlbC5hZGRFdmVudExpc3RlbmVyKCd0b3VjaHN0YXJ0Jywgb25Nb3VzZURvd24pO1xuICAgICAgICAgICAgZWwucmVtb3ZlRXZlbnRMaXN0ZW5lcignbW91c2Vtb3ZlJywgb25Nb3VzZU1vdmUpO1xuICAgICAgICAgICAgZWwucmVtb3ZlRXZlbnRMaXN0ZW5lcigndG91Y2htb3ZlJywgb25Nb3VzZU1vdmUpO1xuICAgICAgICAgICAgZWwuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vtb3ZlJywgb25Nb3VzZU1vdmUpO1xuICAgICAgICAgICAgLy8gZWwuYWRkRXZlbnRMaXN0ZW5lcigndG91Y2htb3ZlJywgb25Nb3VzZU1vdmUpO1xuICAgICAgICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21vdXNldXAnLCBvbk1vdXNlRW5kKTtcbiAgICAgICAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCd0b3VjaGVuZCcsIG9uTW91c2VFbmQpO1xuICAgICAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNldXAnLCBvbk1vdXNlRW5kKTtcbiAgICAgICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCd0b3VjaGVuZCcsIG9uTW91c2VFbmQpO1xuXG4gICAgICAgICAgICBpZiAoYXV0b3BsYXkpIHtcbiAgICAgICAgICAgICAgICB0aW1lcklkID0gc2V0SW50ZXJ2YWwoKCkgPT4gdG9nZ2xlSW5kZXgoKGFjdGl2ZUluZEluZGV4ICsgMSkgJSBpbmRpY2F0b3JzLmxlbmd0aCksIEFVVE9QTEFZX0lOVEVSVkFMKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIG9ialxuICAgICAgICB9LFxuICAgICAgICBjb25maWc6IHtcbiAgICAgICAgICAgIGVsZW1zUGVyUGFnZToge1xuICAgICAgICAgICAgICAgIC4uLntcbiAgICAgICAgICAgICAgICAgICAgJ2xnJzogMSxcbiAgICAgICAgICAgICAgICAgICAgJ21kJzogMSxcbiAgICAgICAgICAgICAgICAgICAgJ3NtJzogMSxcbiAgICAgICAgICAgICAgICAgICAgJ3hzJzogMVxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgLi4uKChjb25maWcgJiYgY29uZmlnLmVsZW1zUGVyUGFnZSkgfHwge30pXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgbWVkaWE6IHtcbiAgICAgICAgICAgICAgICAuLi57XG4gICAgICAgICAgICAgICAgICAgICdsZyc6IDExNjAsXG4gICAgICAgICAgICAgICAgICAgICdtZCc6IDkyMCxcbiAgICAgICAgICAgICAgICAgICAgJ3NtJzogNzAwXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAuLi4oKGNvbmZpZyAmJiBjb25maWcubWVkaWEpIHx8IHt9KVxuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBidWlsZFNsaWRlcjogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgb2JqLnJlbW92ZVNsaWRlcigpO1xuXG5cbiAgICAgICAgICAgIHZhciB3cmFwcGVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgICAgICAgIHdyYXBwZXIuY2xhc3NOYW1lID0gJ3NsaWRlci13cmFwcGVyJztcbiAgICAgICAgICAgIHZhciBpbm5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgICAgICBpbm5lci5jbGFzc05hbWUgPSAnc2xpZGVyLWlubmVyJztcbiAgICAgICAgICAgIHdyYXBwZXIuYXBwZW5kQ2hpbGQoaW5uZXIpO1xuICAgICAgICAgICAgZWwuYXBwZW5kQ2hpbGQod3JhcHBlcik7XG5cbiAgICAgICAgICAgIGlmIChvYmouY29uZmlnLmVsZW1zUGVyUGFnZVttZWRpYVN0ZXBdID49IGl0ZW1zLmxlbmd0aCArIDEpIHtcbiAgICAgICAgICAgICAgICBlbC5jbGFzc0xpc3QuYWRkKCdub3QtZW5vdWdoLWVsZW1zJyk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYnVpbGRQYWdlcygpO1xuICAgICAgICB9LFxuICAgICAgICAvLyAgICAgZ2V0TWVkaWFTdGVwKCkge1xuICAgICAgICAvLyAgICAgLy8gdmFyIHdpZHRoID0gd2luZG93LmlubmVyV2lkdGg7XG4gICAgICAgIC8vICAgICAvLyB2YXIgbmV3U3RlcCA9IHdpZHRoID4gbWVkaWFDb25maWcgJiYgbWVkaWFDb25maWcubGcgIT09IHVuZGVmaW5lZCA/IG1lZGlhQ29uZmlnLmxnIDogMTE1MCA/ICdsZydcbiAgICAgICAgLy8gICAgIC8vICAgICA6IHdpZHRoID4gKG1lZGlhQ29uZmlnICYmIG1lZGlhQ29uZmlnLm1kICE9PSB1bmRlZmluZWQgPyBtZWRpYUNvbmZpZy5tZCA6IDc2NykgPyAnbWQnXG4gICAgICAgIC8vICAgICAvLyAgICAgICAgIDogd2lkdGggPiAobWVkaWFDb25maWcgJiYgbWVkaWFDb25maWcuc20gIT09IHVuZGVmaW5lZCA/IG1lZGlhQ29uZmlnLnNtIDogNjAwKSA/ICdzbScgOiAneHMnO1xuICAgICAgICAvL1xuICAgICAgICAvLyAgICAgaWYgKG1lZGlhU3RlcCAhPT0gbmV3U3RlcCkge1xuICAgICAgICAvLyAgICAgICAgIG1lZGlhU3RlcCA9IG5ld1N0ZXA7XG4gICAgICAgIC8vICAgICAgICAgb2JqLmJ1aWxkU2xpZGVyKCk7XG4gICAgICAgIC8vICAgICB9XG4gICAgICAgIC8vIH0sXG4gICAgICAgIHJlbW92ZVNsaWRlcjogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIHdyYXBwZXIgPSBlbC5xdWVyeVNlbGVjdG9yKCcuc2xpZGVyLXdyYXBwZXInKTtcbiAgICAgICAgICAgIGVsLmNsYXNzTGlzdC5yZW1vdmUoJ25vdC1lbm91Z2gtZWxlbXMnKVxuICAgICAgICAgICAgd3JhcHBlciAmJiB3cmFwcGVyLnJlbW92ZSgpO1xuICAgICAgICAgICAgaWYgKHRpbWVySWQpIHtcbiAgICAgICAgICAgICAgICBjbGVhckludGVydmFsKHRpbWVySWQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICB0b2dnbGU6IHRvZ2dsZUluZGV4XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gYnVpbGRJbmRpY2F0b3JzKCkge1xuICAgICAgICB2YXIgcHJldkluZCA9IGVsLnF1ZXJ5U2VsZWN0b3IoJy5zbGlkZXItaW5kaWNhdG9ycycpO1xuICAgICAgICBwcmV2SW5kICYmIHByZXZJbmQucmVtb3ZlKCk7XG5cbiAgICAgICAgdmFyIGluZGljYXRvcnMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgaW5kaWNhdG9ycy5jbGFzc0xpc3QuYWRkKCdzbGlkZXItaW5kaWNhdG9ycycpXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgTWF0aC5jZWlsKGl0ZW1zLmxlbmd0aCAvIGdldEl0ZW1zUXVhbnRpdHkoKSk7IGkrKykge1xuICAgICAgICAgICAgbGV0IGluZGljYXRvciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICAgICAgaW5kaWNhdG9yLmNsYXNzTGlzdC5hZGQoJ3NsaWRlci1pbmRpY2F0b3InKTtcbiAgICAgICAgICAgIGlmIChpID09PSBhY3RpdmVJbmRJbmRleCkge1xuICAgICAgICAgICAgICAgIGluZGljYXRvci5jbGFzc0xpc3QuYWRkKCdhY3RpdmUnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGluZGljYXRvci5zZXRBdHRyaWJ1dGUoJ2luZGV4JywgaSlcbiAgICAgICAgICAgIGluZGljYXRvci5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICB0b2dnbGVJbmRleChpKVxuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIGluZGljYXRvcnMuYXBwZW5kQ2hpbGQoaW5kaWNhdG9yKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciB3cmFwcGVyID0gZWwucXVlcnlTZWxlY3RvcignLnNsaWRlci13cmFwcGVyJylcbiAgICAgICAgd3JhcHBlci5hcHBlbmRDaGlsZChpbmRpY2F0b3JzKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBidWlsZFBhZ2VzKHN0ZXApIHtcbiAgICAgICAgc3RlcCA9IHN0ZXAgfHwgMTtcbiAgICAgICAgdmFyIHBhZ2VQcmV2ID0gYnVpbGRQYWdlKG9iai5hY3RpdmVJbmRleCArIGl0ZW1zLmxlbmd0aCAtIGdldEl0ZW1zUXVhbnRpdHkoKSAqIHN0ZXApO1xuICAgICAgICB2YXIgcGFnZUN1cnJlbnQgPSBidWlsZFBhZ2Uob2JqLmFjdGl2ZUluZGV4KVxuICAgICAgICB2YXIgcGFnZU5leHQgPSBidWlsZFBhZ2Uob2JqLmFjdGl2ZUluZGV4ICsgZ2V0SXRlbXNRdWFudGl0eSgpICogc3RlcCk7XG4gICAgICAgIHZhciBpbm5lciA9IGVsLnF1ZXJ5U2VsZWN0b3IoJy5zbGlkZXItaW5uZXInKTtcbiAgICAgICAgaWYgKGdldEl0ZW1zUXVhbnRpdHkoKSA8IGl0ZW1zLmxlbmd0aCkge1xuICAgICAgICAgICAgYnVpbGRJbmRpY2F0b3JzKCk7XG4gICAgICAgICAgICBpZiAoIWVsLnF1ZXJ5U2VsZWN0b3IoJy5zbGlkZXItaW5kaWNhdG9yLmFjdGl2ZScpKSB7XG4gICAgICAgICAgICAgICAgLy8gdG9nZ2xlSW5kZXgoMCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaW5uZXIuaW5uZXJIVE1MID0gJyc7XG4gICAgICAgIGlubmVyLmFwcGVuZENoaWxkKHBhZ2VQcmV2KVxuICAgICAgICBpbm5lci5hcHBlbmRDaGlsZChwYWdlQ3VycmVudClcbiAgICAgICAgaW5uZXIuYXBwZW5kQ2hpbGQocGFnZU5leHQpXG4gICAgfVxuXG4gICAgZnVuY3Rpb24gYnVpbGRQYWdlKGluZGV4KSB7XG4gICAgICAgIHZhciBwYWdlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKVxuICAgICAgICBwYWdlLmNsYXNzTGlzdC5hZGQoJ3NsaWRlci1wYWdlJylcbiAgICAgICAgZm9yIChsZXQgaSA9IGluZGV4OyBpIDwgKGluZGV4ICsgZ2V0SXRlbXNRdWFudGl0eSgpKTsgaSsrKSB7XG4gICAgICAgICAgICBsZXQgaXRlbSA9IGl0ZW1zW2kgJSBpdGVtcy5sZW5ndGhdO1xuICAgICAgICAgICAgbGV0IG5ld0l0ZW0gPSBpdGVtLmNsb25lTm9kZSh0cnVlKTtcbiAgICAgICAgICAgIHBhZ2UuYXBwZW5kQ2hpbGQobmV3SXRlbSlcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcGFnZTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiB0b2dnbGVJbmRleChpbmRleCkge1xuICAgICAgICB2YXIgaW5kQWN0aXZlID0gZWwucXVlcnlTZWxlY3RvcignLnNsaWRlci1pbmRpY2F0b3IuYWN0aXZlJylcbiAgICAgICAgdmFyIGluZGljYXRvcnMgPSBlbC5xdWVyeVNlbGVjdG9yQWxsKCcuc2xpZGVyLWluZGljYXRvcicpO1xuICAgICAgICBpZiAoIWluZGljYXRvcnNbaW5kZXhdKSB7XG4gICAgICAgICAgICByZXR1cm5cbiAgICAgICAgfVxuXG4gICAgICAgIGxlZnRBcnJvdy5jbGFzc0xpc3QucmVtb3ZlKCdhcnJvdy1kaXNhYmxlZCcpO1xuICAgICAgICByaWdodEFycm93LmNsYXNzTGlzdC5yZW1vdmUoJ2Fycm93LWRpc2FibGVkJyk7XG5cbiAgICAgICAgaWYgKGluZGV4ID09PSAwKSB7XG4gICAgICAgICAgICBsZWZ0QXJyb3cuY2xhc3NMaXN0LmFkZCgnYXJyb3ctZGlzYWJsZWQnKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChpbmRleCA9PT0gaW5kaWNhdG9ycy5sZW5ndGggLSAxKSB7XG4gICAgICAgICAgICByaWdodEFycm93LmNsYXNzTGlzdC5hZGQoJ2Fycm93LWRpc2FibGVkJyk7XG4gICAgICAgIH1cblxuICAgICAgICBpbmRBY3RpdmUgJiYgaW5kQWN0aXZlLmNsYXNzTGlzdC5yZW1vdmUoJ2FjdGl2ZScpXG4gICAgICAgIGluZGljYXRvcnNbaW5kZXhdICYmIGluZGljYXRvcnNbaW5kZXhdLmNsYXNzTGlzdC5hZGQoJ2FjdGl2ZScpXG4gICAgICAgIGlmIChpbmRleCA+IGFjdGl2ZUluZEluZGV4KSB7XG4gICAgICAgICAgICBpbmRleCAtIGFjdGl2ZUluZEluZGV4ID4gMSAmJiBidWlsZFBhZ2VzKGluZGV4IC0gYWN0aXZlSW5kSW5kZXgpXG4gICAgICAgICAgICBvYmoubmV4dCgpO1xuICAgICAgICB9IGVsc2UgaWYgKGluZGV4IDwgYWN0aXZlSW5kSW5kZXgpIHtcbiAgICAgICAgICAgIGFjdGl2ZUluZEluZGV4IC0gaW5kZXggPiAxICYmIGJ1aWxkUGFnZXMoYWN0aXZlSW5kSW5kZXggLSBpbmRleClcbiAgICAgICAgICAgIG9iai5wcmV2KClcbiAgICAgICAgfVxuICAgICAgICBhY3RpdmVJbmRJbmRleCA9IGluZGV4XG4gICAgICAgIC8vIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jdXJyZW50JykudGV4dENvbnRlbnQgPSBhY3RpdmVJbmRJbmRleCArIDE7XG4gICAgfVxuXG4gICAgb2JqLnByZXYgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciB3cmFwcGVyID0gZWwucXVlcnlTZWxlY3RvcignLnNsaWRlci13cmFwcGVyJylcbiAgICAgICAgd3JhcHBlci5jbGFzc0xpc3QuYWRkKCdwcmV2Jyk7XG4gICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgd3JhcHBlci5jbGFzc0xpc3QucmVtb3ZlKCdwcmV2JylcbiAgICAgICAgICAgIG9iai5hY3RpdmVJbmRleCA9IChvYmouYWN0aXZlSW5kZXggLSBnZXRJdGVtc1F1YW50aXR5KCkgKyBpdGVtcy5sZW5ndGgpICUgaXRlbXMubGVuZ3RoO1xuICAgICAgICAgICAgYnVpbGRQYWdlcygpXG4gICAgICAgIH0sIDMwMCk7XG4gICAgfVxuXG4gICAgb2JqLm5leHQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciB3cmFwcGVyID0gZWwucXVlcnlTZWxlY3RvcignLnNsaWRlci13cmFwcGVyJylcbiAgICAgICAgd3JhcHBlci5jbGFzc0xpc3QuYWRkKCduZXh0Jyk7XG4gICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgd3JhcHBlci5jbGFzc0xpc3QucmVtb3ZlKCduZXh0JylcbiAgICAgICAgICAgIG9iai5hY3RpdmVJbmRleCA9IChvYmouYWN0aXZlSW5kZXggKyBnZXRJdGVtc1F1YW50aXR5KCkgKyBpdGVtcy5sZW5ndGgpICUgaXRlbXMubGVuZ3RoO1xuICAgICAgICAgICAgYnVpbGRQYWdlcygpXG4gICAgICAgIH0sIDMwMCk7XG4gICAgfVxuICAgIHJldHVybiBvYmouaW5pdCgpO1xufVxuIiwiIl19
